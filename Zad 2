// SO2 IS1 211A LAB02
// Patryk Siemi≈Ñski
// psieminski@wi.zut.edu.pl

#include <stdlib.h>
#include <iostream>
#include <stdio.h>
#include <utmp.h>
#include <sys/stat.h>
#include <fcntl.h>
#include <unistd.h>

using namespace std;

int fd;
utmp connected;
bool qflag=0;

int main(int argc, char** argv) {

  while ((opt = getopt (argc, argv, "q")) != -1)
       {
       		if (opt=='q') qflag = 1;
       }
       
       if (!qflag)
       {
	int fd = open("/var/run/utmp", O_RDONLY);

	while(read(fd, &connected, sizeof(utmp)) != 0) {
			if(connected.ut_type == USER_PROCESS)
			{
			cout << "Username : " << connected.ut_name << endl;
			}
	}
	}
	return (EXIT_SUCCESS);
}
